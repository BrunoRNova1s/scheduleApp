(this.webpackJsonpblueprism=this.webpackJsonpblueprism||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(18),a=c.n(r),l=(c(24),c(4)),o=(c(25),c(2)),i=c.n(o);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()().month();e=Math.floor(e);var t=i()().year(),c=i()(new Date(t,e,1)).day(),n=0-c,s=new Array(5).fill([]).map((function(){return new Array(7).fill(null).map((function(){return n++,i()(new Date(t,e,n))}))}));return s}var u=s.a.createContext({monthIndex:0,setMonthIndex:function(e){},dispatchCalEvent:function(e){e.type,e.payload},savedEventsLogs:[],setSelectedEvent:function(){}}),j=c(0);function b(){var e=Object(n.useContext)(u),t=e.monthIndex,c=e.setMonthIndex;return Object(j.jsxs)("header",{className:"px-4 py-2 flex justify-between",children:[Object(j.jsx)("h1",{className:"mr-10 text-xl text-gray-500 font-bold",children:"Schedules"}),Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("button",{onClick:function(){c(i()().month())},className:"border rounded py-2 px-4 mr-5",children:"Today"}),Object(j.jsx)("button",{onClick:function(){c(t-1)},children:Object(j.jsx)("span",{className:"material-icons-outlined cursor-pointer text-gray-600 mx-2",children:"chevron_left"})}),Object(j.jsx)("button",{onClick:function(){c(t+1)},children:Object(j.jsx)("span",{className:"material-icons-outlined cursor-pointer text-gray-600 mx-2",children:"chevron_right"})}),Object(j.jsx)("h2",{className:"ml-4 text-xl text-gray-500 font-bold",children:i()(new Date(i()().year(),t)).format("MMMM YYYY")})]})]})}var x=c(9);function f(e){var t=e.title,c=e.description,s=e.day,r=e.id,a=e.state,o=Object(n.useContext)(u),i=o.dispatchCalEvent,d=o.setSelectedEvent,b=Object(n.useState)(""),f=Object(l.a)(b,2),h=f[0],m=f[1];return Object(n.useEffect)((function(){m(a)}),[a]),Object(j.jsx)("div",Object(x.a)(Object(x.a)({className:"flex"},"retire"===h&&{onClick:function(){d(r)},className:"cursor-pointer"}),{},{children:Object(j.jsxs)("form",{className:"bg-white rounded-lg shadow-md w-full",children:[Object(j.jsx)("header",{className:"bg-gray-100 px-4 py-2 flex justify-center items-center",children:Object(j.jsx)("span",{className:"",children:t})}),Object(j.jsx)("div",{className:"p-3",children:Object(j.jsxs)("div",{className:"grid grid-cols-1/5 items-end gap-y-7",children:[Object(j.jsx)("div",{}),Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)("span",{className:"material-icons-outlined text-gray-400",children:"bookmark_border"}),Object(j.jsx)("p",{children:c})]})]})}),Object(j.jsx)("footer",{className:"flex justify-end border-t p-3 mt-5",children:Object(j.jsx)("button",{type:"button",onClick:function(e){e.preventDefault();var n={title:t,description:c,day:s,id:r};"retire"===h?(i({type:"delete",payload:r}),m("unretired")):(i({type:"push",payload:[n]}),m("retired"))},className:"bg-blue-500 hover:bg-blue-600 px-6 py-2 rounded text-white","data-testid":"cta",children:h})})]})}))}function h(){var e=Object(n.useContext)(u).schedulesCard,t=Object(n.useContext)(u).savedEventsLogs;return Object(j.jsx)("aside",{className:"border p-5 w-64",children:Object(j.jsx)("div",{className:"flex flex-col gap-y-8 h-full overflow-y-scroll",children:e&&e.map((function(e){return Object(j.jsx)(f,{title:e.title,day:e.day,description:e.description,state:t.some((function(t){return t.id===e.id}))?"retire":"unretire",id:e.id},e.id)}))})})}function m(e){var t=e.day,c=e.rowIdx,s=Object(n.useState)([]),r=Object(l.a)(s,2),a=r[0],o=r[1],d=Object(n.useContext)(u),b=d.savedEventsLogs,x=d.selectedEvent;return Object(n.useEffect)((function(){var e=b.filter((function(e){return i()(e.day).format("DD-MM-YY")===t.format("DD-MM-YY")&&e.id===x}));o(e)}),[b,t,x]),Object(j.jsxs)("div",{className:"border border-gray-200 flex flex-col",children:[Object(j.jsxs)("header",{className:"flex flex-col items-center",children:[0===c&&Object(j.jsx)("p",{className:"text-sm mt-1",children:t.format("ddd").toUpperCase()}),Object(j.jsx)("p",{className:"text-sm p-1 my-1 text-center  ".concat(t.format("DD-MM-YY")===i()().format("DD-MM-YY")?"bg-blue-600 text-white rounded-full w-7":""),children:t.format("DD")})]}),Object(j.jsx)("div",{className:"flex-1",children:a.map((function(e,t){return Object(j.jsx)("div",{className:"bg-red-200 p-1 mr-3 text-gray-600 text-sm rounded mb-1 truncate",children:e.title},t)}))})]})}function O(e){var t=e.month;return Object(j.jsx)("div",{className:"flex-1 grid grid-cols-7 grid-rows-5",children:t.map((function(e,t){return Object(j.jsx)(s.a.Fragment,{children:e.map((function(e,c){return Object(j.jsx)(m,{day:e,rowIdx:t},c)}))},t)}))})}var p=function(){var e=Object(n.useState)(d()),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useContext)(u).monthIndex;return Object(n.useEffect)((function(){s(d(r))}),[r]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"h-screen flex flex-col",children:[Object(j.jsx)(b,{}),Object(j.jsxs)("div",{className:"flex flex-1",children:[Object(j.jsx)(h,{}),Object(j.jsx)(O,{month:c})]})]})})},v=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,45)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))},y=c(6),g=c(19),N=c.n(g).a.create({baseURL:"https://my-json-server.typicode.com/BrunoRNova1s/scheduleApp/"});function w(e,t){var c=t.type,n=t.payload;switch(c){case"get":return Object(y.a)(n);case"push":return N.post.apply(N,["scheduleLogs"].concat(Object(y.a)(n))),[].concat(Object(y.a)(e),Object(y.a)(n));case"delete":return N.delete("scheduleLogs/".concat(n)),e.filter((function(e){return e.id!==n}));default:throw new Error}}function C(e){var t=Object(n.useState)(i()().month()),c=Object(l.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)([]),o=Object(l.a)(a,2),d=o[0],b=o[1],x=Object(n.useReducer)(w,[]),f=Object(l.a)(x,2),h=f[0],m=f[1],O=Object(n.useState)(null),p=Object(l.a)(O,2),v=p[0],y=p[1];return Object(n.useEffect)((function(){N.get("/schedules").then((function(e){b(e.data)})).catch((function(e){console.log(e)})),N.get("/scheduleLogs").then((function(e){m({type:"get",payload:e.data})})).catch((function(e){console.log(e)}))}),[]),Object(j.jsx)(u.Provider,{value:{monthIndex:s,setMonthIndex:r,dispatchCalEvent:m,selectedEvent:v,setSelectedEvent:y,savedEventsLogs:h,schedulesCard:d},children:e.children})}a.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(C,{children:Object(j.jsx)(p,{})})}),document.getElementById("root")),v()}},[[44,1,2]]]);
//# sourceMappingURL=main.5f725cf1.chunk.js.map